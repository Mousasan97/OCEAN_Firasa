# OCEAN Personality API Environment Configuration
# Copy this file to .env and update values for your environment

# =============================================================================
# RENDER DEPLOYMENT QUICK START
# =============================================================================
# For Render deployment, set these in the Render Dashboard > Environment:
#
# Required:
#   MODEL_DEVICE=cpu
#   ENVIRONMENT=production
#   DEBUG=false
#   AI_PROVIDER=gemini  (or openai, anthropic)
#   GOOGLE_API_KEY=your-key  (if using gemini)
#   OPENAI_API_KEY=your-key  (if using openai)
#
# Optional but recommended:
#   LOG_FORMAT=json
#   CORS_ORIGINS=["https://your-frontend.onrender.com"]
#
# =============================================================================

# =============================================================================
# Application Settings
# =============================================================================
APP_NAME="OCEAN Personality API"
APP_VERSION="1.0.0"
ENVIRONMENT=development  # development, staging, production
DEBUG=true

# =============================================================================
# API Configuration
# =============================================================================
HOST=0.0.0.0
PORT=8000
WORKERS=4
RELOAD=true  # Auto-reload on code changes (development only)

# =============================================================================
# CORS Settings
# =============================================================================
CORS_ORIGINS=["http://localhost:3000", "http://localhost:8000"]
CORS_CREDENTIALS=true

# =============================================================================
# Model Type Selection
# =============================================================================
# Choose between two model architectures:
#
# "resnet" - ResNet18/50 image-based model (RECOMMENDED for better accuracy)
#   - Input: Single image (.jpg, .jpeg, .png, .bmp, .webp)
#   - Uses face detection for preprocessing
#   - Image size: 256x256
#   - Checkpoint: output/single_img_resnet18/best.pt
#
# "vat" - Video Attention Transformer model
#   - Input: Video file (.mp4, .avi, .mov, .mkv, .flv, .wmv)
#   - Extracts 32 frames using k-segment sampling
#   - Image size: 224x224
#   - Checkpoint: video_model/best_model.pth
#
MODEL_TYPE=resnet  # resnet or vat

# =============================================================================
# Model Configuration
# =============================================================================
# ResNet checkpoint (used when MODEL_TYPE=resnet)
MODEL_CHECKPOINT_PATH=output/single_img_resnet18/best.pt
MODEL_BACKBONE=resnet18  # resnet18 or resnet50

# VAT checkpoint (used when MODEL_TYPE=vat)
VAT_CHECKPOINT_PATH=video_model/best_model.pth

# ResNet multi-frame settings
# Extracts multiple frames from video and averages predictions for better accuracy
RESNET_NUM_FRAMES=10  # Number of frames to extract for ResNet (1 = single frame mode)

# Common settings
MODEL_IMAGE_SIZE=256  # Auto-adjusted: 256 for ResNet, 224 for VAT
MODEL_NUM_FRAMES=32  # Number of frames for VAT (ignored for ResNet)
MODEL_DEVICE=auto  # auto, cpu, cuda
MODEL_WARMUP=true

# =============================================================================
# Preprocessing
# =============================================================================
# Face detection (only used for ResNet, ignored for VAT)
# - "face": Detect and crop face, error if no face found
# - "middle": Use full image, no face detection
# - "face+middle": Try face detection, fallback to full image (recommended)
FACE_DETECTION_METHOD=face+middle
FACE_EXPAND_RATIO=0.35
USE_TTA=true  # Test Time Augmentation

# =============================================================================
# File Upload
# =============================================================================
MAX_UPLOAD_SIZE=52428800  # 50MB in bytes
UPLOAD_DIR=uploads
PROCESSED_DIR=processed

# =============================================================================
# Cache Configuration
# =============================================================================
CACHE_ENABLED=true
CACHE_BACKEND=memory  # memory or redis
CACHE_TTL=3600  # seconds

# Redis (if using Redis cache)
REDIS_URL=
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# =============================================================================
# Storage Configuration
# =============================================================================
STORAGE_BACKEND=local  # local or s3

# S3 Configuration (if using S3)
S3_BUCKET=
S3_REGION=
S3_ACCESS_KEY=
S3_SECRET_KEY=

# =============================================================================
# Database (Optional)
# =============================================================================
DATABASE_ENABLED=false
DATABASE_URL=
DATABASE_POOL_SIZE=5

# =============================================================================
# Security & Rate Limiting
# =============================================================================
API_KEY_ENABLED=false
API_KEY=
JWT_SECRET_KEY=

RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=60  # seconds

# =============================================================================
# Logging
# =============================================================================
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR
LOG_FORMAT=text  # text or json
LOG_FILE=

# =============================================================================
# Monitoring (Optional)
# =============================================================================
METRICS_ENABLED=true
SENTRY_DSN=

# =============================================================================
# Background Tasks (Optional)
# =============================================================================
CELERY_BROKER_URL=
CELERY_RESULT_BACKEND=

# =============================================================================
# AI Report Generation (LLM Configuration)
# =============================================================================
AI_REPORT_ENABLED=true
AI_PROVIDER=openai  # openai, vertex, gemini, anthropic

# OpenAI Configuration (if AI_PROVIDER=openai)
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o  # gpt-4o, gpt-4o-mini, o1, etc.
OPENAI_REASONING_EFFORT=medium  # low, medium, high (for o1 models)

# Anthropic Configuration (if AI_PROVIDER=anthropic)
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-sonnet-4-20250514

# Gemini API Configuration (if AI_PROVIDER=gemini)
# Uses Google AI Studio API key - supports both Gemini and Gemma models
# Get your API key from: https://aistudio.google.com/apikey
# Note: Gemma models don't support function calling - will use JSON text fallback (slower but works)
GOOGLE_API_KEY=
GEMINI_MODEL=gemini-2.5-flash  # gemini-2.5-flash, gemini-2.5-pro, gemma-3-27b-it (JSON fallback)

# Vertex AI Configuration (if AI_PROVIDER=vertex)
# Enterprise option using Google Cloud service account
VERTEX_PROJECT=  # Your Google Cloud project ID
VERTEX_LOCATION=us-central1  # Region for Vertex AI
VERTEX_MODEL=gemini-2.5-flash  # gemini-2.5-flash, gemini-2.5-pro, etc.
GOOGLE_APPLICATION_CREDENTIALS=  # Path to service account JSON file

# =============================================================================
# Job Search API (SerpAPI)
# =============================================================================
# Get your API key from: https://serpapi.com/
# Used for job matching feature in the AI assistant
SERPAPI_KEY=
JOB_SEARCH_ENABLED=true
